{% extends "base.html" %}


{% block header %}
<header class="bar bar-nav"><h1 class="title">{{ title }}</h1></header>
{% endblock %}


{% block navi %}
<nav class="bar bar-tab">
  <a class="tab-item external active" href="/page/video" id="video-tab">
    <span class="icon icon-computer"></span>
    <span class="tab-label">视频</span>
    <span class="badge">高速</span>
  </a>
  <a class="tab-item external" href="/page/gif" id="gif-tab">
    <span class="icon icon-emoji"></span>
    <span class="tab-label">GIF</span>
  </a>
  <a class="tab-item external" href="/page/photo" id="photo-tab">
    <span class="icon icon-picture"></span>
    <span class="tab-label">照片</span>
  </a>
</nav>
{% endblock %}


{% block cards %}
<div class="content infinite-scroll infinite-scroll-bottom" data-distance="50">
  <div class="cards"></div>
  <!-- 加载提示符 -->
  <div class="infinite-scroll-preloader">
    <div class="preloader"></div>
  </div>
  <div class="content-block"><p><a id="next-page" href="#" class="button button-big button-round">下一页</a></p></div>
</div>

<script>
// 基础参数
curPage = {{ cur_page }};
type = '{{ type }}';

/* 无限加载 */
var withContent = true;
var loading = false;
var maxPage = curPage + 2;
$.initPage();
addPage(type, curPage);
curPage += 1;
// 注册 infinite 事件处理函数
$(document).on('infinite', '.infinite-scroll-bottom', infinite_scroll);

/* tab 激活状态 */
if (type == 'video') {
  $('#video-tab').attr('class', 'tab-item external active');
  $('#gif-tab').attr('class', 'tab-item external');
  $('#photo-tab').attr('class', 'tab-item external');
} else if (type == 'gif') {
  $('#video-tab').attr('class', 'tab-item external');
  $('#gif-tab').attr('class', 'tab-item external active');
  $('#photo-tab').attr('class', 'tab-item external');
} else if (type == 'photo') {
  $('#video-tab').attr('class', 'tab-item external');
  $('#gif-tab').attr('class', 'tab-item external');
  $('#photo-tab').attr('class', 'tab-item external active');
}

/* 全屏 */

</script>

{% endblock %}
