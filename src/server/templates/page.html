{% extends "base.html" %}

{% block head %}
{{ super() }}
<style>
body{max-width: 500px; margin: auto;}
.infinite-scroll-preloader{margin-top:-20px;}
video{width: 100%;}
#next-page{display: none};
</style>
{% endblock %}


{% block cards %}
<div class="content infinite-scroll infinite-scroll-bottom" data-distance="50">
  <div class="cards"></div>
  <!-- 加载提示符 -->
  <div class="infinite-scroll-preloader">
    <div class="preloader"></div>
  </div>
  <div class="content-block"><p><a id="next-page" href="#" class="button button-big button-round">下一页</a></p></div>
</div>

<script>
// 基础参数
curPage = {{ cur_page }};
type = '{{ type }}';

/* 无限加载 */
var loading = false;
var maxPage = curPage + 2;
$.initPage();
addPage(type, curPage);
curPage += 1;
// 注册 infinite 事件处理函数
$(document).on('infinite', '.infinite-scroll-bottom', infinite_scroll);

/* tab 激活状态 */
if (type == 'video') {
  $('#video-tab').attr('class', 'tab-item external active');
  $('#gif-tab').attr('class', 'tab-item external');
} else if (type == 'gif') {
  $('#video-tab').attr('class', 'tab-item external');
  $('#gif-tab').attr('class', 'tab-item external active');
}
</script>

{% endblock %}
